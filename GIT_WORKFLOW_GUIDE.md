# Gitの基本ワークフロー - 初学者向けガイド

## 📚 目次
1. [Gitとは何か](#gitとは何か)
2. [3つのステージングエリア](#3つのステージングエリア)
3. [基本的なワークフロー](#基本的なワークフロー)
4. [各コマンドの詳細説明](#各コマンドの詳細説明)
5. [実際の使用例](#実際の使用例)
6. [よくある質問](#よくある質問)

---

## Gitとは何か

**Git**は、ファイルの変更履歴を管理するシステムです。以下のようなことができます：

- ✅ ファイルの変更履歴を記録
- ✅ 過去の状態に戻す
- ✅ 複数人で同じプロジェクトを共同作業
- ✅ GitHubなどのリモートリポジトリにバックアップ

---

## 3つのステージングエリア

Gitには、ファイルが移動する3つのエリアがあります：

```
┌─────────────┐      ┌──────────────┐      ┌─────────────┐
│ ワーキング  │  →   │ ステージング  │  →   │ ローカル    │
│ ディレクトリ│      │ エリア        │      │ リポジトリ  │
│ (作業中)    │      │ (準備中)      │      │ (保存済み)  │
└─────────────┘      └──────────────┘      └─────────────┘
     ↓                      ↓                      ↓
  ファイルを編集          git add .              git commit
```

### 1. **ワーキングディレクトリ**（作業エリア）
- あなたが実際にファイルを編集する場所
- まだGitが管理していない状態

### 2. **ステージングエリア**（準備エリア）
- コミットするファイルを選ぶ場所
- `git add`でファイルをここに移動

### 3. **ローカルリポジトリ**（保存エリア）
- 変更履歴が保存される場所
- `git commit`でここに保存

---

## 基本的なワークフロー

### ステップ1: ファイルを編集
```powershell
# エディタでファイルを編集
# 例: README.mdを更新、新しいファイルを作成など
```

### ステップ2: 変更をステージングエリアに追加
```powershell
git add .
```
**意味**: すべての変更をステージングエリアに追加

### ステップ3: コミット（変更を記録）
```powershell
git commit -m "変更内容の説明"
```
**意味**: ステージングエリアの変更をローカルリポジトリに保存

### ステップ4: GitHubにプッシュ（アップロード）
```powershell
git push origin main
```
**意味**: ローカルリポジトリの変更をGitHubにアップロード

---

## 各コマンドの詳細説明

### `git add .`

#### 何をするコマンド？
- 変更したファイルを「コミットする準備ができました」とGitに伝えるコマンド
- すべての変更をステージングエリアに追加します

#### `.`（ドット）の意味
- `.` = 現在のディレクトリとその中身すべて
- つまり「このフォルダ内のすべての変更を追加」という意味

#### 他の使い方
```powershell
# 特定のファイルだけ追加
git add README.md

# 特定のフォルダだけ追加
git add learningNote/

# すべての変更を追加（.と同じ）
git add -A
```

#### 実行後の状態
```
変更前: ファイルを編集しただけ（Gitが認識していない）
変更後: Gitが「このファイルをコミットする準備ができた」と認識
```

---

### `git commit -m "変更内容の説明"`

#### 何をするコマンド？
- ステージングエリアにある変更を「確定して保存する」コマンド
- 変更履歴に「スナップショット」として記録されます

#### `-m`オプションの意味
- `-m` = message（メッセージ）の略
- その後の`"変更内容の説明"`がコミットメッセージになります

#### コミットメッセージの書き方
良い例：
```powershell
git commit -m "READMEを更新して学習目標を追加"
git commit -m "新しいJavaファイルを追加"
git commit -m "バグを修正: 計算式の誤りを修正"
```

悪い例：
```powershell
git commit -m "変更"          # 何を変更したかわからない
git commit -m "修正"          # 何を修正したかわからない
git commit -m "あああ"        # 意味がわからない
```

#### 実行後の状態
```
変更前: ステージングエリアに変更がある（まだ保存されていない）
変更後: 変更がローカルリポジトリに保存された（履歴に記録された）
```

---

### `git push origin main`

#### 何をするコマンド？
- ローカルリポジトリの変更をGitHub（リモートリポジトリ）にアップロードするコマンド
- インターネット上にバックアップを保存するイメージ

#### 各部分の意味
- `git push` = プッシュ（押し出す）コマンド
- `origin` = リモートリポジトリの名前（通常はGitHub）
- `main` = ブランチ名（メインのブランチ）

#### 実行後の状態
```
変更前: 変更はあなたのパソコンにだけある
変更後: 変更がGitHubにも保存された（他の人も見られる）
```

---

## 実際の使用例

### シナリオ: READMEファイルを更新してGitHubにアップロード

#### ステップ1: ファイルを編集
```powershell
# エディタでREADME.mdを開いて編集
# 例: 学習目標を追加、フォルダ構成を更新など
```

#### ステップ2: 変更を確認
```powershell
git status
```
**出力例:**
```
On branch main
Changes not staged for commit:
  modified:   README.md
```

#### ステップ3: 変更をステージング
```powershell
git add README.md
# または、すべての変更を追加する場合
git add .
```

#### ステップ4: コミット
```powershell
git commit -m "READMEを更新: 学習目標とフォルダ構成を追加"
```

#### ステップ5: GitHubにプッシュ
```powershell
git push origin main
```

#### 完了！
GitHubのリポジトリページで変更が確認できます。

---

## よくある質問

### Q1: `git add .`と`git add -A`の違いは？
**A:** ほぼ同じですが、微妙な違いがあります：
- `git add .` = 現在のディレクトリとその中身の変更を追加
- `git add -A` = プロジェクト全体の変更を追加（削除されたファイルも含む）

初学者の方は`git add .`で問題ありません。

---

### Q2: コミットメッセージを忘れたら？
**A:** `-m`オプションを付けずに実行すると、エディタが開きます：
```powershell
git commit
```
エディタでメッセージを書いて保存してください。

よく使うエディタの保存・終了方法：
- **Vim**: `i`で入力 → `Esc` → `:wq` → Enter  
  （`Esc`が効かない場合は`Ctrl + [`でもOK）
- **nano**: 入力 → `Ctrl+O` → Enter（保存）→ `Ctrl+X`（終了）
- **VS Code**: 入力 → `Ctrl+S`（保存）→ タブを閉じる

※ 行頭が`#`の行はコメントとして無視されます。

---

### Q3: 間違ったファイルを`git add`してしまった
**A:** 以下のコマンドで取り消せます：
```powershell
# ステージングエリアから取り消す（ファイルは残る）
git reset HEAD ファイル名

# すべて取り消す
git reset HEAD
```

---

### Q4: コミットしたけど、まだGitHubにプッシュしていない
**A:** 問題ありません。コミットはローカルに保存されているだけです。
プッシュするまで、GitHubには反映されません。

---

### Q5: `git push`でエラーが出た
**A:** よくある原因と対処法：

#### エラー1: "Authentication failed"
```powershell
# 認証情報を更新
git credential-manager-core erase
git push origin main
```

#### エラー2: "Updates were rejected"
```powershell
# リモートの変更を先に取得してからプッシュ
git pull origin main
git push origin main
```

---

### Q6: どのファイルが変更されたか確認したい
**A:** 以下のコマンドで確認できます：
```powershell
# 変更されたファイルの一覧
git status

# 変更内容の詳細
git diff

# ステージング済みの変更内容
git diff --staged
```

---

## 📝 まとめ

### 基本的な流れ（覚えておくこと）

```
1. ファイルを編集
   ↓
2. git add .          （変更を準備）
   ↓
3. git commit -m "説明"  （変更を記録）
   ↓
4. git push origin main   （GitHubにアップロード）
```

### 重要なポイント

1. **`git add`** = 「この変更をコミットします」と準備する
2. **`git commit`** = 「変更を確定して保存する」
3. **`git push`** = 「GitHubにアップロードする」

### 初心者向けのコツ

- ✅ コミットメッセージは具体的に書く
- ✅ 小さな変更を頻繁にコミットする（大きな変更を一度にしない）
- ✅ プッシュ前に`git status`で確認する習慣をつける
- ✅ エラーが出たら、エラーメッセージを読んで対処する

#### 補足：「プッシュ前に git status」のタイミング（任意）

「プッシュ前に`git status`で確認」をより厳密にやる場合は、**`git commit` の直後、`git push` の前** に `git status` を実行すると、次を確認できます。

- コミットがローカルに正しく記録されているか
- まだ push していないコミットが残っていないか（`Your branch is ahead of 'origin/main'` などと出ていれば、プッシュ待ちと分かります）

一方、**`git push` の後に `git status`** で「nothing to commit, working tree clean」と「Your branch is up to date with 'origin/main'」を確認できれば、プッシュまで正しく完了していることが分かります。どちらのタイミングでも、実務上は十分です。

---

## 🎯 練習問題

以下のシナリオで練習してみましょう：

1. 新しいファイル`test.txt`を作成
2. `git add test.txt`で追加
3. `git commit -m "テストファイルを追加"`でコミット
4. `git push origin main`でプッシュ

これで基本的なGitワークフローをマスターできます！

---

**参考資料:**
- [Git公式ドキュメント](https://git-scm.com/doc)
- [GitHub公式ガイド](https://docs.github.com/ja/get-started)
